!function(e){var t={};function i(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var r={getCanvas:function(e,t){var i=document.getElementsByTagName("canvas")[0]||document.createElement("canvas");return i.width=e,i.height=t,document.body.appendChild(i),i},imageLoader:function(e,t){var i={};Promise.all(Object.keys(e).map(function(t){return new Promise(function(r){i[t]=new Image,i[t].onload=r,i[t].src=e[t]})})).then(function(){t(null,i)}).catch(function(e){t(e,i)})},randomArray:function(e){return e[Math.floor(Math.random()*e.length)]},random:function(e,t){return Math.floor(Math.random()*(t-e)+e)}};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}var a=function(){function e(){o(this,e),this.game=null,this.next={state:!1,scene:null,props:null}}return s(e,[{key:"preloader",value:function(e,t){this.game=e,this.next.state=!0,this.next.props=t}},{key:"render",value:function(e){}},{key:"switchScene",value:function(e,t){return this.game instanceof c&&e in this.game.scenes&&e!==this.game.scene&&(this.next={state:!1,scene:e,props:t},!0)}}]),e}(),p=function(){function e(t,i){o(this,e),this.width=t,this.height=i,this.canvas=r.getCanvas(this.width,this.height),this.context=this.canvas.getContext("2d")}return s(e,[{key:"hitBox",value:function(e,t){var i=e.left<t.left?t.left:e.left,r=e.top<t.top?t.top:e.top,o=e.right<t.right?e.right:t.right,n=e.bottom<t.bottom?e.bottom:t.bottom;return o>i&&n>r}}]),e}(),c=function(){function e(t,i){o(this,e),this.screen=new p(t,i),this.scenes={},this.scene=null,this.resources={},this.keydownEvent=null,this.keypressEvent=null,this.keyupEvent=null,this.mousedownEvent=null,this.mouseupEvent=null,this.mousemoveEvent=null,this.mouseoverEvent=null,this.mouseoutEvent=null,this.clickEvent=null,this.dblclickEvent=null}return s(e,[{key:"addScene",value:function(e,t){e in this.scenes||(this.scenes[e]=t)}},{key:"run",value:function(e){var t=this;if(e in this.scenes){var i=this.scenes[e];void 0!==i.preloader&&"function"==typeof i.preloader&&(this.scene=i,this.scene.preloader(this))}document.addEventListener("keydown",function(e){return t.keydownEvent=e},!1),document.addEventListener("keypress",function(e){return t.keypressEvent=e},!1),document.addEventListener("keyup",function(e){return t.keyup=e},!1),document.addEventListener("mousedown",function(e){return t.mousedownEvent=e},!1),document.addEventListener("mouseup",function(e){return t.mouseupEvent=e},!1),document.addEventListener("mousemove",function(e){return t.mousemoveEvent=e},!1),document.addEventListener("mouseover",function(e){return t.mouseoverEvent=e},!1),document.addEventListener("mouseout",function(e){return t.mouseoutEvent=e},!1),document.addEventListener("click",function(e){return t.clickEvent=e},!1),document.addEventListener("dblclick",function(e){return t.dblclickEvent=e},!1),requestAnimationFrame(function e(i){if(t.scene instanceof a){if(!t.scene.next.state&&"string"==typeof t.scene.next.scene&&t.scene.next.scene in t.scenes){var r=t.scenes[t.scene.next.scene];if(void 0!==r.preloader&&"function"==typeof r.preloader){var o=t.scene.next.props;t.scene=r,t.scene.preloader(t,o)}}t.scene.render(i),t.keydownEvent=null,t.keypressEvent=null,t.keyupEvent=null,t.mousedownEvent=null,t.mouseupEvent=null,t.mousemoveEvent=null,t.mouseoverEvent=null,t.mouseoutEvent=null,t.clickEvent=null,t.dblclickEvent=null}requestAnimationFrame(e)})}}]),e}(),u={Scene:a,Screen:p,Game:c};function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e,t,i){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(i):o.value}})(e,t,i||e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e,t,i){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(i):o.value}})(e,t,i||e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e,t,i){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(i):o.value}})(e,t,i||e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e,t,i){return(F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(i):o.value}})(e,t,i||e)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y={GameLoad:function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=f(this,h(t).call(this))).store={loaded:!1,indicator:{symbols:[" "," "," "," "," "],offset:0,counter:0,speed:4}},e}var i,o,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a),i=t,(o=[{key:"preloader",value:function(e,i){var o=this;Object.assign(e.resources,{audioDie:"assets/audio/die.mp3",audioHit:"assets/audio/hit.mp3",audioPoint:"assets/audio/point.mp3",audioWing:"assets/audio/wing.mp3"});r.imageLoader({image0:"assets/image/0.png",image1:"assets/image/1.png",image2:"assets/image/2.png",image3:"assets/image/3.png",image4:"assets/image/4.png",image5:"assets/image/5.png",image6:"assets/image/6.png",image7:"assets/image/7.png",image8:"assets/image/8.png",image9:"assets/image/9.png",imageBackgroundDay:"assets/image/background-day.png",imageBackgroundNight:"assets/image/background-night.png",imageBase:"assets/image/base.png",imageMessage:"assets/image/message.png",imageBlueBirdUpFlap:"assets/image/bluebird-upflap.png",imageBlueBirdMidFlap:"assets/image/bluebird-midflap.png",imageBlueBirdDownFlap:"assets/image/bluebird-downflap.png",imageRedBirdUpFlap:"assets/image/redbird-upflap.png",imageRedBirdMidFlap:"assets/image/redbird-midflap.png",imageRedBirdDownFlap:"assets/image/redbird-downflap.png",imageYellowBirdUpFlap:"assets/image/yellowbird-upflap.png",imageYellowBirdMidFlap:"assets/image/yellowbird-midflap.png",imageYellowBirdDownFlap:"assets/image/yellowbird-downflap.png",imagePipeTopGreen:"assets/image/pipe-top-green.png",imagePipeBottomGreen:"assets/image/pipe-bottom-green.png",imagePipeTopRed:"assets/image/pipe-top-red.png",imagePipeBottomRed:"assets/image/pipe-bottom-red.png",imageGameOver:"assets/image/gameover.png"},function(t,i){t?console.log(t):(e.resources=Object.assign(e.resources,i),o.store.loaded=!0)}),b(h(t.prototype),"preloader",this).call(this,e,i)}},{key:"render",value:function(e){var i=this.store,r=this.game;if(r instanceof c){var o=r.screen;if(o instanceof p){i.loaded&&this.switchScene("gamemenu");var n=o.context;if(n.fillStyle="#000000",n.fillRect(0,0,o.width,o.height),n.fillStyle="#ffffff",n.font="22px Oswald",n.textAlign="center",n.fillText("Loading",Math.floor(o.width/2),Math.floor(o.height/2)-12),n.fillStyle="#ffffff",n.font="22px Oswald",n.textAlign="center",n.fillText(i.indicator.symbols.join(" "),Math.floor(o.width/2),Math.floor(o.height/2)+12),i.indicator.offset>=i.indicator.symbols.length&&(i.indicator.offset=0),(i.indicator.counter+1)%i.indicator.speed==0){switch(i.indicator.counter=0,i.indicator.symbols[i.indicator.offset]){case" ":i.indicator.symbols[i.indicator.offset]="•";break;default:i.indicator.symbols[i.indicator.offset]=" "}i.indicator.offset++}i.indicator.counter++}}b(h(t.prototype),"render",this).call(this,e)}}])&&l(i.prototype,o),n&&l(i,n),t}(),GameMenu:function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=v(this,k(t).call(this))).store={last:0,background:{offset:0,sprite:null},base:{offset:0,sprite:null},message:{sprite:null},bird:{offset:0,direction:1,frequency:0,index:0,position:{x:0,y:0},sprites:[]},audio:{wing:null}},e}var i,o,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,a),i=t,(o=[{key:"preloader",value:function(e,i){var o=this.store;o.last=0,o.background.sprite=e.resources[r.randomArray(["imageBackgroundDay","imageBackgroundNight"])],o.base.sprite=e.resources.imageBase,o.message.sprite=e.resources.imageMessage;var n=r.randomArray([{up:"imageBlueBirdUpFlap",middle:"imageBlueBirdMidFlap",down:"imageBlueBirdDownFlap"},{up:"imageRedBirdUpFlap",middle:"imageRedBirdMidFlap",down:"imageRedBirdDownFlap"},{up:"imageYellowBirdUpFlap",middle:"imageYellowBirdMidFlap",down:"imageYellowBirdDownFlap"}]);o.bird.sprites=[],o.bird.sprites.push(e.resources[n.up]),o.bird.sprites.push(e.resources[n.middle]),o.bird.sprites.push(e.resources[n.down]),o.audio.wing=e.resources.audioWing,w(k(t.prototype),"preloader",this).call(this,e,i)}},{key:"render",value:function(e){var i=this.store,r=this.game;if(r instanceof c){if(null!=r.keydownEvent)switch(r.keydownEvent.keyCode){case 32:new Audio(i.audio.wing).play(),this.switchScene("gameplay",{background:{offset:i.background.offset,sprite:i.background.sprite},base:{offset:i.base.offset,sprite:i.base.sprite},bird:{frequency:i.bird.frequency,index:i.bird.index,position:i.bird.position,sprites:i.bird.sprites}})}if(null!=r.mousedownEvent)switch(r.mousedownEvent.button){case 0:new Audio(i.audio.wing).play(),this.switchScene("gameplay",{background:{offset:i.background.offset,sprite:i.background.sprite},base:{offset:i.base.offset,sprite:i.base.sprite},bird:{frequency:i.bird.frequency,index:i.bird.index,position:i.bird.position,sprites:i.bird.sprites}})}var o=r.screen;if(o instanceof p){var n=o.context;if(e-i.last>30){i.last=e,n.fillStyle="#000000",n.fillRect(0,0,o.width,o.height),n.save(),i.background.offset=-(1-i.background.offset)%i.background.sprite.width,n.translate(i.background.offset,0);for(var s=Math.ceil(o.width/i.background.sprite.width)+1,a=0;a<=s;a++)n.drawImage(i.background.sprite,a*i.background.sprite.width,0);i.base.offset=-(4-i.base.offset)%i.base.sprite.width,n.translate(i.base.offset,0);for(var u=Math.ceil(o.width/i.base.sprite.width)+1,d=0;d<=u;d++)n.drawImage(i.base.sprite,d*i.base.sprite.width,o.height-i.base.sprite.height);n.restore(),n.drawImage(i.message.sprite,Math.floor((o.width-i.message.sprite.width)/2),Math.floor((o.height-i.base.sprite.height-i.message.sprite.height)/2)),8==Math.abs(i.bird.offset)&&(i.bird.direction*=-1),i.bird.offset=1==i.bird.direction?i.bird.offset+1:i.bird.offset-1,(i.bird.frequency+1)%4==0&&(i.bird.frequency=0,i.bird.index++,i.bird.index>=i.bird.sprites.length&&(i.bird.index=0)),i.bird.frequency++;var l=i.bird.sprites[i.bird.index];i.bird.position.x=Math.floor(.2*o.width),i.bird.position.y=Math.floor((o.height-l.height)/2)+i.bird.offset,n.drawImage(l,i.bird.position.x,i.bird.position.y)}}}w(k(t.prototype),"render",this).call(this,e)}}])&&y(i.prototype,o),n&&y(i,n),t}(),GamePlay:function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=j(this,S(t).call(this))).store={last:0,score:{offset:0,value:0,sprites:[]},background:{offset:0,sprite:null},base:{offset:0,sprite:null},bird:{die:!1,velocityY:0,maxVelocityY:0,accelerationY:0,rotation:0,speed:0,rotationThreshold:0,accelerationFlap:0,flapped:!1,frequency:0,index:0,position:{x:0,y:0},rect:{left:0,top:0,right:0,bottom:0},sprites:[]},pipe:{window:100,offset:0,check:{index:0,top:{x:0},bottom:{x:0}},top:{sprite:null},bottom:{sprite:null}},pipes:[],audio:{die:null,hit:null,wing:null,point:null}},e}var i,o,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,a),i=t,(o=[{key:"preloader",value:function(e,i){var o=this.store;o.last=0;var n=o.bird;n.die=!1,n.velocityY=-9,n.maxVelocityY=10,n.accelerationY=1,n.rotation=45,n.speed=3,n.rotationThreshold=45,n.accelerationFlap=-9,n.flapped=!0,n.sprites=[],null!=i&&(Object.assign(o.background,i.background),Object.assign(o.base,i.base),Object.assign(o.bird.frequency,i.bird.frequency),Object.assign(o.bird.index,i.bird.index),Object.assign(o.bird.position,i.bird.position),Object.assign(o.bird.sprites,i.bird.sprites)),o.score.offset=0,o.score.value=0,o.score.sprites=[],o.score.sprites.push(e.resources.image0),o.score.sprites.push(e.resources.image1),o.score.sprites.push(e.resources.image2),o.score.sprites.push(e.resources.image3),o.score.sprites.push(e.resources.image4),o.score.sprites.push(e.resources.image5),o.score.sprites.push(e.resources.image6),o.score.sprites.push(e.resources.image7),o.score.sprites.push(e.resources.image8),o.score.sprites.push(e.resources.image9);var s=r.randomArray([{top:"imagePipeTopGreen",bottom:"imagePipeBottomGreen"},{top:"imagePipeTopRed",bottom:"imagePipeBottomRed"}]);o.pipes=[],o.pipe.check.index=0,o.pipe.check.top.x=0,o.pipe.check.bottom.x=0,o.pipe.offset=r.random(80,120),o.pipe.top.sprite=e.resources[s.top],o.pipe.bottom.sprite=e.resources[s.bottom],o.audio.die=e.resources.audioDie,o.audio.hit=e.resources.audioHit,o.audio.wing=e.resources.audioWing,o.audio.point=e.resources.audioPoint,P(S(t.prototype),"preloader",this).call(this,e,i)}},{key:"render",value:function(e){var i=this.store,o=this.game;if(o instanceof c){if(null!=o.keydownEvent)switch(o.keydownEvent.keyCode){case 32:i.bird.position.y>-2*i.bird.sprites[i.bird.index].height&&!i.bird.die&&(i.bird.velocityY=i.bird.accelerationFlap,i.bird.flapped=!0,new Audio(i.audio.wing).play())}if(null!=o.mousedownEvent)switch(o.mousedownEvent.button){case 0:i.bird.position.y>-2*i.bird.sprites[i.bird.index].height&&!i.bird.die&&(i.bird.velocityY=i.bird.accelerationFlap,i.bird.flapped=!0,new Audio(i.audio.wing).play())}var n=o.screen;if(n instanceof p){var s=n.context;if(e-i.last>30){if(i.last=e,s.fillStyle="#000000",s.fillRect(0,0,n.width,n.height),i.pipes.length>0&&!i.bird.die&&i.pipe.check.index<i.pipes.length){var a=i.pipes[i.pipe.check.index];(n.hitBox(i.bird.rect,a.top.rect)||n.hitBox(i.bird.rect,a.bottom.rect))&&(i.bird.die=!0,new Audio(i.audio.hit).play(),new Audio(i.audio.die).play())}if(i.bird.position.y+i.bird.sprites[i.bird.index].height>=n.height-i.base.sprite.height&&(i.bird.die||new Audio(i.audio.hit).play(),this.switchScene("gameover",{score:{offset:i.score.offset,value:i.score.value,sprites:i.score.sprites},background:{offset:i.background.offset,sprite:i.background.sprite},base:{offset:i.base.offset,sprite:i.base.sprite},bird:{rotation:i.bird.rotation,index:i.bird.index,position:i.bird.position,sprites:i.bird.sprites},pipes:i.pipes})),i.bird.die||(i.background.offset=-(1-i.background.offset)%i.background.sprite.width,i.base.offset=-(4-i.base.offset)%i.base.sprite.width),i.pipes.length>0&&!i.bird.die){if(i.pipe.check.index<i.pipes.length){var u=i.pipes[i.pipe.check.index];i.pipe.check.top.x=u.top.x+u.top.sprite.width,i.pipe.check.bottom.x=u.bottom.x+u.bottom.sprite.width,i.bird.position.x>i.pipe.check.top.x&&i.bird.position.x>i.pipe.check.bottom.x&&(new Audio(i.audio.point).play(),i.score.value++,i.pipe.check.index++)}i.pipes=i.pipes.filter(function(e){var t=e.top,r=e.bottom;return!(t.x<-t.sprite.width&&r.x<-r.sprite.width)||(i.pipe.check.index>0&&i.pipe.check.index--,!1)})}if(!i.bird.die){for(var d=0;d<i.pipes.length;d++){i.pipes[d].top.x-=4,i.pipes[d].bottom.x-=4;var l=i.pipes[d].top.x,f=i.pipes[d].bottom.x,b=i.pipes[d].top.sprite.width,h=i.pipes[d].bottom.sprite.width;i.pipes[d].top.rect.left=l,i.pipes[d].top.rect.right=l+b,i.pipes[d].bottom.rect.left=f,i.pipes[d].bottom.rect.right=f+h}if(i.pipes.length>0){if(i.pipe.offset<=0){i.pipe.offset=r.random(80,120);var g=n.width+i.pipe.top.sprite.width,m=n.width+i.pipe.bottom.sprite.width,y=(n.height-i.base.sprite.height)/2,v=(n.height-i.base.sprite.height-i.pipe.window)/3,w=r.random(-v,v),k=g,x=-i.pipe.top.sprite.height+(y-i.pipe.window/2-w),O=m,E=y+i.pipe.window/2-w;i.pipes.push({top:{x:k,y:x,rect:{left:k,top:x,right:k+i.pipe.top.sprite.width,bottom:x+i.pipe.top.sprite.height},sprite:i.pipe.top.sprite},bottom:{x:O,y:E,rect:{left:O,top:E,right:O+i.pipe.bottom.sprite.width,bottom:E+i.pipe.bottom.sprite.height},sprite:i.pipe.bottom.sprite}})}i.pipe.offset--}else{var j=n.width+i.pipe.top.sprite.width,M=n.width+i.pipe.bottom.sprite.width,B=(n.height-i.base.sprite.height)/2,_=(n.height-i.base.sprite.height-i.pipe.window)/3,R=r.random(-_,_),F=j,I=-i.pipe.top.sprite.height+(B-i.pipe.window/2-R),T=M,Y=B+i.pipe.window/2-R;i.pipes.push({top:{x:F,y:I,rect:{left:F,top:I,right:F+i.pipe.top.sprite.width,bottom:I+i.pipe.top.sprite.height},sprite:i.pipe.top.sprite},bottom:{x:T,y:Y,rect:{left:T,top:Y,right:T+i.pipe.bottom.sprite.width,bottom:Y+i.pipe.bottom.sprite.height},sprite:i.pipe.bottom.sprite}})}}i.bird.die||((i.bird.frequency+1)%4==0&&(i.bird.frequency=0,i.bird.index++,i.bird.index>=i.bird.sprites.length&&(i.bird.index=0)),i.bird.frequency++),i.bird.rotation<=45&&(i.bird.rotation+=i.bird.speed),i.bird.velocityY<i.bird.maxVelocityY&&!i.bird.flapped&&(i.bird.velocityY+=i.bird.accelerationY),i.bird.flapped&&(i.bird.flapped=!1,i.bird.rotation=-45);var q=i.bird.sprites[i.bird.index];i.bird.position.y+=Math.min(i.bird.velocityY,n.height-i.base.sprite.height-i.bird.position.y-q.height);var A=i.bird.rotationThreshold;i.bird.rotation<=i.bird.rotationThreshold&&(A=i.bird.rotation);for(var G=i.score.value.toString().split("").map(function(e){return parseInt(e)}),L=0,D=0;D<G.length;D++){var C=G[D];L+=i.score.sprites[C].width}i.score.offset=Math.floor((n.width-L)/2),s.save(),s.translate(i.background.offset,0);for(var U=Math.ceil(n.width/i.background.sprite.width)+1,N=0;N<=U;N++)s.drawImage(i.background.sprite,N*i.background.sprite.width,0);s.restore();for(var V=0;V<i.pipes.length;V++){var W=i.pipes[V];s.drawImage(W.top.sprite,W.top.x,W.top.y),s.drawImage(W.bottom.sprite,W.bottom.x,W.bottom.y)}s.save(),s.translate(i.base.offset,0);for(var H=Math.ceil(n.width/i.base.sprite.width)+1,z=0;z<=H;z++)s.drawImage(i.base.sprite,z*i.base.sprite.width,n.height-i.base.sprite.height);s.restore(),s.save();var J=i.bird.position.x,K=i.bird.position.y+q.height;i.bird.rect.left=Math.floor(J+-q.width/2),i.bird.rect.top=Math.floor(K+-q.height/2),i.bird.rect.right=i.bird.rect.left+q.width,i.bird.rect.bottom=i.bird.rect.top+q.height,s.translate(J,K),i.bird.die?(i.bird.rotation=90,s.rotate(i.bird.rotation*Math.PI/180)):s.rotate(A*Math.PI/180),s.drawImage(q,-q.width/2,-q.height/2),s.restore();for(D=0;D<G.length;D++){var Q=G[D],X=i.score.sprites[Q];s.drawImage(X,i.score.offset,52),i.score.offset+=X.width}}}}P(S(t.prototype),"render",this).call(this,e)}}])&&E(i.prototype,o),n&&E(i,n),t}(),GameOver:function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=R(this,I(t).call(this))).store={last:0,score:{offset:0,value:0,sprites:[]},background:{offset:0,sprite:null},base:{offset:0,sprite:null},over:{sprite:null},bird:{rotation:0,index:0,position:{x:0,y:0},sprites:[]},pipes:[]},e}var i,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,a),i=t,(r=[{key:"preloader",value:function(e,i){var r=this.store;r.last=0,r.score.sprites=[],r.bird.sprites=[],r.pipes=[],null!=i&&(Object.assign(r.score,i.score),Object.assign(r.background,i.background),Object.assign(r.base,i.base),Object.assign(r.bird,i.bird),Object.assign(r.pipes,i.pipes)),r.over.sprite=e.resources.imageGameOver,F(I(t.prototype),"preloader",this).call(this,e,i)}},{key:"render",value:function(e){var i=this.store,r=this.game;if(r instanceof c){if(null!=r.keydownEvent)switch(r.keydownEvent.keyCode){case 32:this.switchScene("gamemenu")}if(null!=r.mousedownEvent)switch(r.mousedownEvent.button){case 0:this.switchScene("gamemenu")}var o=r.screen;if(o instanceof p){var n=o.context;if(e-i.last>30){i.last=e,n.fillStyle="#000000",n.fillRect(0,0,o.width,o.height),n.save(),n.translate(i.background.offset,0);for(var s=Math.ceil(o.width/i.background.sprite.width)+1,a=0;a<=s;a++)n.drawImage(i.background.sprite,a*i.background.sprite.width,0);n.restore();for(var u=0;u<i.pipes.length;u++){var d=i.pipes[u];n.drawImage(d.top.sprite,d.top.x,d.top.y),n.drawImage(d.bottom.sprite,d.bottom.x,d.bottom.y)}n.save(),n.translate(i.base.offset,0);for(var l=Math.ceil(o.width/i.base.sprite.width)+1,f=0;f<=l;f++)n.drawImage(i.base.sprite,f*i.base.sprite.width,o.height-i.base.sprite.height);n.restore();var b=i.bird.sprites[i.bird.index];n.save(),n.translate(i.bird.position.x,i.bird.position.y+b.height),n.rotate(i.bird.rotation*Math.PI/180),n.drawImage(b,-b.width/2,-b.height/2),n.restore();for(var h=i.score.value.toString().split("").map(function(e){return parseInt(e)}),g=0,m=0;m<h.length;m++){var y=h[m];g+=i.score.sprites[y].width}i.score.offset=Math.floor((o.width-g)/2);for(m=0;m<h.length;m++){var v=h[m],w=i.score.sprites[v];n.drawImage(w,i.score.offset,52),i.score.offset+=w.width}n.drawImage(i.over.sprite,(o.width-i.over.sprite.width)/2,(o.height-i.over.sprite.height)/2)}}}F(I(t.prototype),"render",this).call(this,e)}}])&&_(i.prototype,r),o&&_(i,o),t}()};window.onload=function(){var e=new u.Game(800,512);e.addScene("gameload",new Y.GameLoad),e.addScene("gamemenu",new Y.GameMenu),e.addScene("gameplay",new Y.GamePlay),e.addScene("gameover",new Y.GameOver),e.run("gameload")}}]);